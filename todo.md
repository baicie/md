# Typora Clone 开发计划

vscode插件？谷歌插件？

## 项目概述

- 开发时间：每天 19:00-23:00（4小时）
- 总工期：4 周
- 技术栈：
  - 编辑器：Tiptap
  - 前端：React + Vite
  - 后端：NestJS
  - 桌面端：Tauri
  - CLI：Commander.js
  - 数据存储：IndexDB/PostgreSQL

## 项目结构

## 第一周：基础框架搭建

### Day 1（周一）：项目初始化

#### 19:00-20:00 创建项目结构

- [x] 创建 monorepo 仓库
- [x] 配置 pnpm workspace
- [x] 初始化 Git 仓库
- [x] 创建基础目录结构

#### 20:00-21:00 配置开发环境

- [x] 配置 TypeScript
- [x] 配置 ESLint 和 Prettier
- [x] 配置 Git 工作流
- [x] 配置 CI/CD 基础

#### 21:00-23:00 创建基础项目

- [x] 初始化前端项目（Vite + React）
- [x] 初始化后端项目（NestJS）
- [x] 初始化 Tauri 项目
- [x] 测试项目基础功能

### Day 2（周二）：编辑器核心

#### 19:00-20:30 Tiptap 集成

- [x] 安装 Tiptap 核心依赖
- [x] 配置基础扩展
- [x] 实现 Markdown 支持
- [x] 测试基础编辑功能

#### 20:30-22:00 编辑器基础功能

- [x] 创建工具栏组件
- [x] 实现快捷键支持
- [x] 实现基础格式化功能

#### 22:00-23:00 编辑器主题

- [x] 设计主题系统
- [x] 实现明暗主题
- [x] 创建主题切换功能
- [x] 测试主题系统
  <!-- vitest + workspace +  tailwindcss = who use who sb-->
  <!-- 配置后无法正确找到tailwindcss配置 不知道是谁的错 大概率是vitest的 -->

### Day 3（周三）：PC 客户端

#### 19:00-20:30 Tauri 配置

- [x] 配置主进程
- [x] 设置 IPC 通信
- [x] 配置窗口管理
- [ ] 测试基础功能

#### 20:30-22:00 文件系统集成

- [ ] 实现文件读写
- [ ] 实现目录操作
- [ ] 实现最近文件记录
- [ ] 测试文件操作

#### 22:00-23:00 应用菜单

- [ ] 创建菜单配置
- [ ] 绑定快捷键
- [ ] 实现上下文菜单
- [ ] 测试菜单功能
- [ ] 右键菜单

### Day 4（周四）：数据存储

#### 19:00-20:30 IndexDB 实现

- [ ] 设计存储结构
  ```typescript
  interface Storage {
    files: {
      id: string
      path: string
      content: string
      lastModified: number
      version: number
    }[]
    settings: {
      theme: 'light' | 'dark'
      fontSize: number
      lineHeight: number
      autosave: boolean
    }
  }
  ```
- [ ] 实现 CRUD 操作
- [ ] 实现数据迁移
- [ ] 测试存储功能

#### 20:30-22:00 本地文件系统

- [ ] 实现文件读写
- [ ] 实现自动保存
- [ ] 实现文件监听
- [ ] 测试文件操作

#### 22:00-23:00 同步策略

- [ ] 设计版本控制
- [ ] 实现冲突检测
- [ ] 设计合并策略
- [ ] 测试同步功能

### Day 5（周五）：后端基础

#### 19:00-20:30 数据库设计

- [ ] 设计用户模型
- [ ] 设计文件模型
- [ ] 设计设置模型
- [ ] 创建数据迁移

#### 20:30-22:00 认证系统

- [ ] 实现 JWT 认证
- [ ] 实现权限控制
- [ ] 实现会话管理
- [ ] 测试认证功能

#### 22:00-23:00 基础 API

- [ ] 实现用户接口
- [ ] 实现文件接口
- [ ] 实现设置接口
- [ ] 测试 API 功能

### Day 6（周六）：CLI 开发

#### 19:00-20:30 CLI 框架

- [ ] 配置 Commander.js
- [ ] 设计命令结构
- [ ] 实现帮助信息
- [ ] 测试基础功能

#### 20:30-22:00 部署命令

- [ ] 实现服务部署
- [ ] 实现环境配置
- [ ] 实现数据迁移
- [ ] 测试部署功能

#### 22:00-23:00 工具命令

- [ ] 实现状态检查
- [ ] 实现日志查看
- [ ] 实现配置管理
- [ ] 测试工具命令

### Day 7（周日）：测试与文档

#### 19:00-20:30 单元测试

- [ ] 编写编辑器测试
- [ ] 编写工具函数测试
- [ ] 编写 API 测试
- [ ] 运行测试套件

#### 20:30-22:00 集成测试

- [ ] 测试前后端集成
- [ ] 测试客户端集成
- [ ] 测试 CLI 集成
- [ ] 修复测试问题

#### 22:00-23:00 文档编写

- [ ] 编写 API 文档
- [ ] 编写开发文档
- [ ] 编写部署文档
- [ ] 审查文档质量

## 第二周：功能开发

### Day 8（周一）：图片处理

#### 19:00-20:30 图片上传

- [ ] 实现图片上传组件
- [ ] 实现图片预览
- [ ] 实现图片存储
- [ ] 测试图片功能

#### 20:30-22:00 图片管理

- [ ] 实现图片列表
- [ ] 实现图片编辑
- [ ] 实现图片删除
- [ ] 测试管理功能

#### 22:00-23:00 图片优化

- [ ] 实现图片压缩
- [ ] 实现懒加载
- [ ] 实现缓存策略
- [ ] 测试优化效果

### Day 9（周二）：表格功能

#### 19:00-20:30 表格编辑

- [ ] 实现表格创建
- [ ] 实现单元格编辑
- [ ] 实现表格样式
- [ ] 测试基础功能

#### 20:30-22:00 表格操作

- [ ] 实现行列操作
- [ ] 实现合并单元格
- [ ] 实现表格排序
- [ ] 测试操作功能

#### 22:00-23:00 表格优化

- [ ] 实现快捷键
- [ ] 实现撤销重做
- [ ] 优化性能
- [ ] 测试优化效果

### Day 10（周三）：代码功能

#### 19:00-20:30 代码块

- [ ] 实现代码高亮
- [ ] 实现语言选择
- [ ] 实现行号显示
- [ ] 测试基础功能

#### 20:30-22:00 代码编辑

- [ ] 实现代码补全
- [ ] 实现代码格式化
- [ ] 实现代码折叠
- [ ] 测试编辑功能

#### 22:00-23:00 代码优化

- [ ] 实现主题切换
- [ ] 实现快捷键
- [ ] 优化性能
- [ ] 测试优化效果

### Day 11（周四）：数学公式

#### 19:00-20:30 公式编辑

- [ ] 集成 KaTeX
- [ ] 实现公式输入
- [ ] 实现公式预览
- [ ] 测试基础功能

#### 20:30-22:00 公式增强

- [ ] 实现公式模板
- [ ] 实现快捷输入
- [ ] 实现错误提示
- [ ] 测试增强功能

#### 22:00-23:00 公式优化

- [ ] 优化渲染性能
- [ ] 优化输入体验
- [ ] 实现缓存策略
- [ ] 测试优化效果

### Day 12（周五）：导出功能

#### 19:00-20:30 Markdown 导出

- [ ] 实现 MD 导出
- [ ] 实现图片处理
- [ ] 实现元数据
- [ ] 测试导出功能

#### 20:30-22:00 PDF 导出

- [ ] 实现 PDF 转换
- [ ] 实现样式控制
- [ ] 实现目录生成
- [ ] 测试导出功能

#### 22:00-23:00 其他格式

- [ ] 实现 HTML 导出
- [ ] 实现 Word 导出
- [ ] 实现批量导出
- [ ] 测试导出功能

### Day 13（周六）：搜索功能

#### 19:00-20:30 文内搜索

- [ ] 实现关键词搜索
- [ ] 实现正则搜索
- [ ] 实现结果高亮
- [ ] 测试搜索功能

#### 20:30-22:00 全局搜索

- [ ] 实现文件搜索
- [ ] 实现内容搜索
- [ ] 实现搜索历史
- [ ] 测试搜索功能

#### 22:00-23:00 搜索优化

- [ ] 实现搜索建议
- [ ] 实现快捷操作
- [ ] 优化搜索性能
- [ ] 测试优化效果

### Day 14（周日）：文件树

#### 19:00-20:30 基础实现

- [ ] 实现目录结构
- [ ] 实现文件操作
- [ ] 实现拖拽功能
- [ ] 测试基础功能

#### 20:30-22:00 增强功能

- [ ] 实现文件过滤
- [ ] 实现快速导航
- [ ] 实现文件预览
- [ ] 测试增强功能

#### 22:00-23:00 优化体验

- [ ] 实现上下文菜单
- [ ] 实现快捷键
- [ ] 优化性能
- [ ] 测试优化效果

## 第三周：核心优化

### Day 15（周一）：编辑器优化

#### 19:00-20:30 基础优化

- [ ] 优化编辑响应速度
- [ ] 优化光标处理
- [ ] 优化复制粘贴体验

#### 20:30-22:00 快捷键优化

- [ ] 完善常用快捷键
- [ ] 添加自定义快捷键
- [ ] 优化快捷键提示

#### 22:00-23:00 主题优化

- [ ] 完善明暗主题
- [ ] 优化代码高亮
- [ ] 优化字体渲染

### Day 16（周二）：文件处理优化

#### 19:00-20:30 本地存储

```typescript
interface FileStorage {
  // 简化的文件存储结构
  files: {
    id: string
    name: string
    content: string
    lastModified: number
  }[]
  // 基础设置
  settings: {
    theme: 'light' | 'dark'
    fontSize: number
    autosave: boolean
  }
}
```

- [ ] 优化自动保存
- [ ] 优化文件加载
- [ ] 实现历史记录

#### 20:30-23:00 文件管理

- [ ] 优化文件树性能
- [ ] 完善文件搜索
- [ ] 优化拖拽体验

### Day 17（周三）：同步功能

#### 19:00-20:30 基础同步

- [ ] 完善文件同步
- [ ] 优化冲突处理
- [ ] 添加同步提示

#### 20:30-23:00 离线支持

- [ ] 完善离线存储
- [ ] 优化重连处理
- [ ] 添加同步状态显示

### Day 18（周四）：性能优化

#### 19:00-20:30 启动优化

- [ ] 优化加载速度
- [ ] 减少初始包大小
- [ ] 优化资源加载

#### 20:30-23:00 运行优化

- [ ] 优化内存使用
- [ ] 处理大文件性能
- [ ] 优化搜索性能

### Day 19-21（周五到周日）：Bug修复和体验优化

- [ ] 修复已知问题
- [ ] 优化错误提示
- [ ] 完善使用体验
- [ ] 添加使用引导

## 第四周：完善和发布

### Day 22-23（周一到周二）：部署优化

#### 19:00-23:00 部署流程

- [ ] 简化安装过程
- [ ] 优化更新机制
- [ ] 完善错误处理
- [ ] 测试部署流程

### Day 24-25（周三到周四）：文档编写

#### 19:00-23:00 用户文档

- [ ] 编写安装指南
- [ ] 编写使用教程
- [ ] 编写常见问题
- [ ] 添加示例说明

### Day 26-27（周五到周六）：发布准备

#### 19:00-23:00 发布准备

- [ ] 完整功能测试
- [ ] 修复最后问题
- [ ] 准备发布包
- [ ] 编写更新日志

### Day 28（周日）：正式发布

#### 19:00-23:00 发布

- [ ] 发布到 GitHub
- [ ] 发布客户端
- [ ] 更新文档
- [ ] 收集初始反馈
